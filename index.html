<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#004aad">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="apple-touch-icon" href="icons/visa-192.png">

<title>Gerência de Vigilância Sanitária</title>

<style>
:root {
    --azul1: #2c5aa0;
    --azul2: #3d6bb3;
    --cinza1: #f2f4f8;
    --texto: #333;
}

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: var(--cinza1);
    color: var(--texto);
}

#conteudo {
    display: none;
}

#login {
    text-align: center;
    margin-top: 80px;
}

header {
    background: linear-gradient(135deg, var(--azul1), var(--azul2));
    color: white;
    padding: 35px 20px;
    text-align: center;
}

.container {
    max-width: 1100px;
    margin: 30px auto;
    padding: 0 20px;
}

.card {
    background: white;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.07);
}

.card h3 {
    color: var(--azul1);
    border-left: 6px solid var(--azul1);
    padding-left: 10px;
}

.footer {
    text-align: center;
    padding: 25px;
    color: #666;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
    <h2>Área Restrita</h2>
    <p>Entre com sua conta Google Institucional</p>
    <button onclick="loginGoogle()" style="padding:12px 20px;font-size:16px;">
        Entrar com Google
    </button>
</div>

<!-- CONTEÚDO PROTEGIDO -->
<div id="conteudo">

<header>
<h1>Gerência de Vigilância Sanitária</h1>
<h2>Diretoria de Vigilância em Saúde — Anápolis</h2>
</header>

<div class="container">

<div class="card">
<h3>Avisos</h3>
<p>Comunicados internos publicados aqui.</p>
</div>

<div class="card">
<h3>Acessos rápidos</h3>
<ul>
<li><a href="Escala Dezembro v11.html">Escala</a></li>
<li><a href="Totalização v11.html">Totalização</a></li>
<li><a href="Escala_Veiculos_Dezembro_2025_VERSAO_FINAL.html">Veículos</a></li>
<li><a href="Alvaras_FINAL_COMPLETO_LIMPO_AVANCADO_v13_5.html">Alvarás</a></li>
</ul>
</div>

<button onclick="logout()" style="padding:10px;margin-top:20px">Sair</button>

</div>

<div class="footer">
Gerência de Vigilância Sanitária – Diretoria de Vigilância em Saúde<br>
Município de Anápolis – GO<br>
© 2025
</div>

</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import {
  getAuth,
  signInWithPopup,
  GoogleAuthProvider,
  onAuthStateChanged,
  signOut
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDo473puJesZ9rr3IBoX5AWczCIMuKBTrg",
  authDomain: "visam-3a30b.firebaseapp.com",
  projectId: "visam-3a30b",
  messagingSenderId: "308899251430",
  appId: "1:308899251430:web:0053cdbd0bed7f0de76727"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// LOGIN
window.loginGoogle = function() {
  signInWithPopup(auth, provider).catch(console.error);
};

// CONTROLE DE SESSÃO
onAuthStateChanged(auth, user => {
  if (user) {
    document.getElementById("login").style.display = "none";
    document.getElementById("conteudo").style.display = "block";
  } else {
    document.getElementById("login").style.display = "block";
    document.getElementById("conteudo").style.display = "none";
  }
});

// LOGOUT
window.logout = function(){
  signOut(auth);
};
</script>

</body>
</html>
